{% extends 'design_app/base.html' %}

{% block content %}
<header class="p-5 mb-4 bg-white rounded-3 shadow-sm text-center">
    <div class="container-fluid py-5">
        <h1 class="display-4 fw-bold text-dark">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä—å–µ—Ä —Å Design.<span style="color: #667eea;">pro</span></h1>
        <p class="fs-5 text-muted">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∏–∑–∞–π–Ω-—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</p>

        <!-- –°—á–µ—Ç—á–∏–∫ –∑–∞—è–≤–æ–∫ –≤ —Ä–∞–±–æ—Ç–µ -->
        <div class="alert alert-info d-inline-block border-0" style="background: #667eea; color: white;">
            <h5 class="mb-0">üîÑ –ó–∞—è–≤–æ–∫ –≤ —Ä–∞–±–æ—Ç–µ: {{ in_progress_count }}</h5>
        </div>

        {% if not user.is_authenticated %}
            <hr class="my-4">
            <p>–ù–∞—á–Ω–∏—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–π –∏–¥–µ–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—å–µ—Ä —Å–µ–≥–æ–¥–Ω—è!</p>
            <a class="btn btn-primary btn-lg" href="{% url 'register' %}" role="button">
                –ù–∞—á–∞—Ç—å –°–æ–∑–¥–∞–Ω–∏–µ
            </a>
            <p class="mt-3"><small class="text-secondary">–£–∂–µ —Å –Ω–∞–º–∏? <a href="{% url 'login' %}" class="text-decoration-none">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</a></small></p>
        {% else %}
            <hr class="my-4">
            <p class="fs-5">–†–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å, <span class="fw-bold">{{ user.username }}</span>!</p>
            <p class="text-muted">–í–∞—à–∏ –¥–∏–∑–∞–π–Ω-–ø—Ä–æ–µ–∫—Ç—ã –∂–¥—É—Ç –≤–∞—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ</p>
            <a class="btn btn-primary btn-lg" href="{% url 'profile' %}" role="button">
                –ú–æ–π –ö–∞–±–∏–Ω–µ—Ç
            </a>
        {% endif %}
    </div>
</header>

<!-- –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã -->
{% if completed_applications %}
<div class="row mb-5">
    <div class="col-12">
        <h2 class="text-center mb-4">–ù–∞—à–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–∞–±–æ—Ç—ã</h2>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            {% for app in completed_applications %}
            <div class="col">
                <div class="card h-100 shadow-sm border-0">
                    {% if app.plan_file %}
                    <img src="{{ app.plan_file.url }}" class="card-img-top" alt="{{ app.title }}" style="height: 200px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ app.title }}</h5>
                        <p class="card-text">
                            <small class="text-muted">{{ app.category.name }}</small><br>
                            <small class="text-muted">–ó–∞–≤–µ—Ä—à–µ–Ω–æ: {{ app.upload_date|date:"d.m.Y" }}</small>
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

<!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
<div class="row row-cols-1 row-cols-md-3 g-4 text-center mb-5">
    <div class="col">
        <div class="card h-100 p-4 border-0 shadow-sm">
            <h3 class="card-title fw-bold" style="color: #667eea;">üìê –ü–ª–∞–Ω—ã –∏ –ß–µ—Ä—Ç–µ–∂–∏</h3>
            <p class="card-text text-muted">–ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –ø–ª–∞–Ω—ã –ø–æ–º–µ—â–µ–Ω–∏–π –≤ –ª—é–±–æ–º —Ñ–æ—Ä–º–∞—Ç–µ</p>
        </div>
    </div>
    <div class="col">
        <div class="card h-100 p-4 border-0 shadow-sm">
            <h3 class="card-title fw-bold" style="color: #667eea;">üé® –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –î–∏–∑–∞–π–Ω</h3>
            <p class="card-text text-muted">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤</p>
        </div>
    </div>
    <div class="col">
        <div class="card h-100 p-4 border-0 shadow-sm">
            <h3 class="card-title fw-bold" style="color: #667eea;">üí¨ –ë—ã—Å—Ç—Ä–∞—è –°–≤—è–∑—å</h3>
            <p class="card-text text-muted">–û–±—Å—É–∂–¥–∞–π—Ç–µ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã –æ–Ω–ª–∞–π–Ω</p>
        </div>
    </div>
</div>
{% endblock %}